import LessonLayout from "@/components/LessonLayout";
import YouTubeEmbed from "@/components/YouTubeEmbed";

export default function TaxFundamentals() {
  const sections = [
    {
      title: "Understanding the U.S. Tax System",
      content: `The United States has a complex tax system with multiple types of taxes at federal, state, and local levels. Understanding how these taxes work is essential for effective financial planning.

**Federal Income Tax Structure**

**Progressive Tax System**:
The U.S. uses a progressive tax system where higher income levels are taxed at higher rates. This means you don't pay the same rate on all your income—only income above certain thresholds is taxed at higher rates.

**2024 Tax Brackets (Single Filers)**:
• 10%: $0 to $11,000
• 12%: $11,001 to $44,725
• 22%: $44,726 to $95,375
• 24%: $95,376 to $182,050
• 32%: $182,051 to $231,250
• 35%: $231,251 to $578,125
• 37%: $578,126 and above

**Tax Bracket Example**:
If you earn $60,000 as a single filer:
• First $11,000: 10% tax = $1,100
• Next $33,725: 12% tax = $4,047
• Next $15,275: 22% tax = $3,361
• **Total tax**: $8,508 (14.2% effective rate)

**Marginal vs. Effective Tax Rates**:
• **Marginal rate**: Tax rate on your last dollar of income
• **Effective rate**: Total tax divided by total income
• **Average rate**: Often same as effective rate

**State and Local Taxes**

**State Income Tax**:
• **No state income tax**: 9 states including FL, TX, WA, NV
• **Flat rate states**: 8 states with single tax rate
• **Progressive states**: Most states with multiple brackets
• **Reciprocity agreements**: Some states don't double-tax border workers

**State Sales Tax**:
• **Range**: 0% (5 states) to 7.25% (California)
• **Local additions**: Cities and counties can add additional sales tax
• **Exemptions**: Food, medicine, clothing (varies by state)
• **Use tax**: Tax on out-of-state purchases

**Property Tax**:
• **Local assessment**: Based on property value assessments
• **Mill rates**: Tax rate expressed per $1,000 of assessed value
• **Homestead exemptions**: Reductions for primary residences
• **Assessment appeals**: Process to challenge property valuations

**Payroll Taxes**

**Social Security Tax**:
• **Rate**: 6.2% for employee, 6.2% for employer (12.4% total)
• **Wage base**: $160,200 for 2024 (adjusted annually)
• **Self-employed**: Pay both portions (12.4% total)
• **Benefits**: Earnings history determines future Social Security benefits

**Medicare Tax**:
• **Rate**: 1.45% for employee, 1.45% for employer (2.9% total)
• **No wage cap**: Applies to all earned income
• **Additional Medicare**: 0.9% on high earners ($200K+ single, $250K+ married)
• **Self-employed**: Pay both portions (2.9% total)

**Types of Income**

**Ordinary Income**:
• **Wages and salaries**: Employment income
• **Business income**: Self-employment and partnership income
• **Interest income**: Bank accounts, bonds, loans
• **Rental income**: Real estate rental income
• **Royalties**: Patents, copyrights, natural resources

**Capital Gains**:
• **Short-term**: Assets held 1 year or less (taxed as ordinary income)
• **Long-term**: Assets held more than 1 year (preferential rates)
• **Collectibles**: 28% maximum rate for art, coins, etc.
• **Real estate**: Special rules for primary residence sales

**Tax-Advantaged Income**:
• **Municipal bonds**: Interest often tax-free
• **Roth IRA distributions**: Tax-free in retirement
• **Life insurance**: Death benefits generally tax-free
• **Gifts and inheritances**: Generally not taxable to recipient

This foundation helps you understand how taxes work before diving into specific strategies for minimizing your tax burden.`,
    },
    {
      title: "Deductions vs. Credits: Maximizing Tax Benefits",
      content: `Understanding the difference between tax deductions and credits is crucial for effective tax planning. Both reduce your tax burden, but they work in fundamentally different ways.

**Tax Deductions Explained**

**How Deductions Work**:
Deductions reduce your taxable income, which then reduces your tax bill based on your marginal tax rate.

**Deduction Value Formula**:
Tax savings = Deduction amount × Marginal tax rate

**Example**: $1,000 deduction in 22% tax bracket
• **Tax savings**: $1,000 × 22% = $220
• **Higher bracket = more savings**: Same deduction worth $370 in 37% bracket

**Standard vs. Itemized Deductions**

**Standard Deduction Benefits**:
• **Simplicity**: No need to track individual expenses
• **Guaranteed**: Available to all taxpayers
• **Inflation adjusted**: Increases annually with inflation
• **Reduced audit risk**: Less complex than itemizing

**Standard Deduction (2024)**:
• **Single**: $14,600
• **Married Filing Jointly**: $29,200
• **Married Filing Separately**: $14,600
• **Head of Household**: $21,900

**When to Itemize**:
• **Total itemized deductions exceed standard deduction**
• **Significant mortgage interest**: Large home loans
• **High state and local taxes**: Before $10,000 SALT cap
• **Major medical expenses**: Exceeding 7.5% of AGI
• **Significant charitable giving**: Large donations

**Common Itemized Deductions**

**State and Local Taxes (SALT)**:
• **Limitation**: $10,000 cap for income and property taxes combined
• **Strategies**: Timing payments, considering state tax planning
• **Married filing separately**: Each spouse can claim $10,000

**Mortgage Interest**:
• **Acquisition debt**: Interest on first $750,000 of home loans
• **Points**: Prepaid interest often deductible
• **Refinancing**: Points must be amortized over loan term
• **Second homes**: Interest on vacation homes may be deductible

**Charitable Contributions**:
• **Cash donations**: Up to 60% of AGI for most charities
• **Appreciated assets**: Deduct fair market value, avoid capital gains
• **Volunteer expenses**: Mileage and out-of-pocket costs
• **Documentation**: Receipts required for all donations

**Tax Credits Explained**

**How Credits Work**:
Tax credits directly reduce your tax bill dollar-for-dollar, making them more valuable than deductions.

**Types of Credits**:
• **Refundable**: Can result in refund even if no tax owed
• **Non-refundable**: Limited to your tax liability
• **Partially refundable**: Combination of both types

**Major Tax Credits**

**Child Tax Credit**:
• **Amount**: Up to $2,000 per qualifying child under 17
• **Refundable portion**: Up to $1,600 per child
• **Income limits**: Phases out at higher income levels
• **Qualifying children**: Must meet relationship, age, and residency tests

**Earned Income Tax Credit (EITC)**:
• **Low-income workers**: Designed to supplement wages
• **Maximum credit**: Varies by number of children and income
• **Fully refundable**: Can result in refund exceeding taxes paid
• **Investment income limit**: Disqualified if investment income too high

**Education Credits**:
• **American Opportunity Credit**: Up to $2,500 per student (first 4 years)
• **Lifetime Learning Credit**: Up to $2,000 per family (any post-secondary)
• **Income limits**: Credits phase out at higher income levels
• **Qualified expenses**: Tuition, fees, books, supplies

**Strategic Planning**

**Timing Deductions**:
• **Bunching**: Accelerate deductions into years when itemizing
• **Charitable giving**: Large donations in alternating years
• **Medical expenses**: Time elective procedures to exceed threshold
• **Business expenses**: Accelerate or defer business purchases

**Maximizing Credits**:
• **Income management**: Stay within credit phase-out ranges
• **Education planning**: Coordinate education credits with 529 plans
• **Retirement contributions**: Maximize saver's credit eligibility
• **Energy improvements**: Take advantage of temporary credits

Understanding these concepts helps you make informed decisions about tax planning strategies and ensure you're taking advantage of all available benefits.`,
    },
    {
      title: "Tax-Advantaged Accounts and Retirement Planning",
      content: `Tax-advantaged accounts are powerful tools for building wealth while reducing your current tax burden. Understanding how these accounts work is essential for optimal tax planning.

**Traditional vs. Roth Account Comparison**

**Traditional Accounts (Tax-Deferred)**:
• **Immediate tax benefit**: Deductible contributions reduce current taxes
• **Tax-deferred growth**: No taxes on investment gains while in account
• **Taxable withdrawals**: Pay ordinary income taxes on all withdrawals
• **Required distributions**: Must start taking money out at age 73

**Roth Accounts (Tax-Free)**:
• **After-tax contributions**: No immediate tax deduction
• **Tax-free growth**: No taxes on investment gains
• **Tax-free withdrawals**: No taxes on qualified distributions
• **No required distributions**: Can leave money in account indefinitely

**401(k) and 403(b) Plans**

**Employer-Sponsored Benefits**:
• **Employer matching**: Free money that should be maximized
• **Higher contribution limits**: $23,000 in 2024 (plus $7,500 catch-up if 50+)
• **Automatic payroll deduction**: Easy to maintain consistent contributions
• **Vesting schedules**: Employer contributions may have vesting requirements

**Individual Retirement Accounts (IRAs)**

**Traditional IRA**:
• **Contribution limits**: $7,000 in 2024 (plus $1,000 catch-up if 50+)
• **Deductibility**: Phases out at higher income levels if covered by employer plan
• **Investment flexibility**: Can invest in almost anything
• **Required distributions**: Must start at age 73

**Roth IRA**:
• **Income limits**: Contribution eligibility phases out at higher incomes
• **5-year rule**: Must wait 5 years for tax-free earnings withdrawals
• **Contribution flexibility**: Can withdraw contributions anytime tax-free
• **No required distributions**: Can leave money in account indefinitely

**Health Savings Accounts (HSAs)**

**Triple Tax Advantage**:
• **Tax-deductible contributions**: Reduce current year taxes
• **Tax-free growth**: No taxes on investment gains
• **Tax-free withdrawals**: For qualified medical expenses

**HSA Requirements**:
• **High-deductible health plan**: Must be enrolled in qualifying plan
• **No other coverage**: Can't have other health insurance coverage
• **Contribution limits**: $4,300 individual, $8,550 family in 2024
• **Catch-up contributions**: Additional $1,000 if 55 or older

**529 Education Savings Plans**

**Education Benefits**:
• **Tax-free growth**: No taxes on investment gains
• **Tax-free withdrawals**: For qualified education expenses
• **State tax benefits**: Many states offer deductions or credits
• **Flexible beneficiary**: Can change beneficiary to other family members

**Advanced Strategies**

**Roth Conversion Ladder**:
• **Systematic conversions**: Convert traditional IRA to Roth annually
• **Tax management**: Control timing and amount of conversions
• **Income planning**: Coordinate with other income sources

**Tax-Loss Harvesting**:
• **Realize losses**: Sell investments at a loss to offset gains
• **Wash sale rule**: Can't repurchase same security for 30 days
• **Tax-alpha generation**: Additional returns from tax management

**Asset Location**:
• **Tax-efficient placement**: Put right investments in right accounts
• **Taxable accounts**: Tax-efficient index funds, individual stocks
• **Tax-deferred accounts**: REITs, bonds, actively managed funds
• **Roth accounts**: Highest growth potential investments

Remember: Tax laws change frequently, and individual circumstances vary significantly. Consider working with a qualified tax professional to develop strategies appropriate for your specific situation.`,
    },
    {
      title: "Year-Round Tax Planning Strategies",
      content: `Effective tax planning isn't just a year-end activity—it requires ongoing attention throughout the year to maximize opportunities and avoid costly mistakes.

**January - March: Tax Season Planning**

**Tax Preparation**:
��� **Organize documents**: Gather all tax forms and receipts
• **Software vs. professional**: Decide on tax preparation method
• **Prior year review**: Learn from previous year's tax situation
• **Estimated payments**: Calculate first quarter estimated taxes

**IRA Contributions**:
• **Deadline**: Can contribute for prior year until April 15
• **Traditional vs. Roth**: Evaluate which type makes sense
• **Catch-up contributions**: Additional $1,000 if 50 or older
• **Backdoor Roth**: Execute strategy if applicable

**April - June: Second Quarter Strategy**

**Estimated Tax Payments**:
• **Self-employed**: Make quarterly payments by April 15, June 15
• **Investment income**: Plan for capital gains and dividends
• **Safe harbor rules**: Pay 100% of prior year tax (110% if high income)
• **Penalty avoidance**: Ensure adequate withholding or payments

**Mid-Year Tax Projection**:
• **Income assessment**: Review year-to-date income and projections
• **Deduction planning**: Estimate itemized vs. standard deduction
• **Withholding adjustment**: Modify W-4 if needed
• **Roth conversion opportunity**: Consider conversions in low-income years

**July - September: Third Quarter Adjustments**

**Retirement Plan Contributions**:
• **401(k) contributions**: Adjust to maximize employer match
• **Catch-up contributions**: Increase contributions if 50 or older
• **Roth conversions**: Consider converting traditional IRA funds
• **Beneficiary updates**: Review and update beneficiary designations

**October - December: Year-End Tax Planning**

**Income Management**:
• **Bonus timing**: Defer bonuses to next year if beneficial
• **Roth conversions**: Execute conversions before year-end
• **Required distributions**: Take RMDs from retirement accounts
• **Capital gains**: Realize gains to use up lower tax brackets

**Deduction Strategies**:
• **Bunching deductions**: Accelerate deductions into current year
• **Charitable giving**: Make large donations before year-end
• **Medical expenses**: Schedule elective procedures if beneficial
• **State tax payments**: Prepay state taxes if deductible

**Investment Tax Planning**:
• **Tax-loss harvesting**: Realize losses to offset gains
• **Asset location**: Move investments to tax-efficient accounts
• **Municipal bonds**: Consider tax-free municipal bonds
• **Dividend timing**: Manage dividend income for optimal taxation

**Multi-Year Tax Planning**

**Income Smoothing**:
• **Bunching income**: Concentrate income in certain years
• **Roth conversion ladders**: Systematic traditional to Roth conversions
• **Deferral strategies**: Delay income to lower tax years
• **Acceleration strategies**: Accelerate income in lower tax years

**Lifecycle Tax Planning**:
• **Early career**: Maximize Roth contributions, minimize current taxes
• **Peak earning years**: Balance current and future tax rates
• **Pre-retirement**: Optimize withdrawal strategies
• **Retirement**: Minimize taxes on retirement income

**State Tax Considerations**

**Multi-State Planning**:
• **Residency rules**: Understand state residency requirements
• **Source rules**: Different states tax different types of income
• **Reciprocity agreements**: Some states don't double-tax
• **Retirement income**: Some states don't tax retirement income

**Common Tax Planning Mistakes**

**Timing Errors**:
• **Procrastination**: Waiting until year-end limits options
• **Wash sale violations**: Repurchasing securities too quickly
• **RMD failures**: Missing required minimum distributions
• **Estimated payment penalties**: Inadequate quarterly payments

**Documentation Failures**:
• **Missing receipts**: Losing documentation for deductions
• **Inadequate records**: Poor record-keeping for business expenses
• **Beneficiary oversights**: Outdated beneficiary designations
• **Audit preparation**: Insufficient documentation for tax positions

**Strategy Coordination**:
• **Conflicting strategies**: Tax moves that work against each other
• **Ignoring state taxes**: Focusing only on federal tax implications
• **Short-term thinking**: Optimizing current year at expense of future
• **Professional coordination**: Advisors not communicating effectively

Remember: Tax planning is most effective when integrated with your overall financial plan. Regular review and adjustment of strategies ensures you're taking advantage of all available opportunities while staying compliant with tax laws.`,
    },
  ];

  return (
    <LessonLayout
      title="Tax Fundamentals"
      intro="Learn about different types of taxes, deductions, credits, and strategies to minimize your tax burden legally."
      sections={sections}
      videoEmbed={
        <YouTubeEmbed
          videoId="ROb2Vp5Rs7A"
          title="How Taxes Work in the U.S."
        />
      }
      duration="16 min"
      difficulty="Intermediate"
      prevLessonPath="/lessons/understanding-inflation"
      prevLessonTitle="Understanding Inflation"
      nextLessonPath="/lessons/retirement-planning"
      nextLessonTitle="Retirement Planning"
      quizId="tax-fundamentals"
    />
  );
}
